<html>
<head>
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="http://underscorejs.org/underscore-min.js"></script>
    <script src="https://cdn.firebase.com/js/client/2.2.9/firebase.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>

    <style type="text/css">

    </style>
</head>

<body>
    <canvas id="myChart"></canvas>

    <script type="text/javascript">
        var jqXHR = $.ajax({
            url: "http://127.0.0.1:5000/sensor/readings/minute",
            dataType: "json"
        });

        jqXHR.done(function(data) {
            var times = _.keys(data);
            var temps = _.values(data);

            var chart_data = {
                labels: times,
                datasets: [
                    {
                        label: "Temperatures",
                        fillColor: "rgba(151,187,205,0.2)",
                        strokeColor: "rgba(151,187,205,1)",
                        pointColor: "rgba(151,187,205,1)",
                        pointStrokeColor: "#fff",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(151,187,205,1)",
                        data: temps
                    }
                ]
            };

            Chart.defaults.global.responsive = true;

            var ctx = document.getElementById("myChart").getContext("2d");
            var myNewChart = new Chart(ctx).Line(chart_data, {
                scaleShowGridLines : false,
                pointDot : false,
                bezierCurve: false,
            });
        });




      //   var data = {
      //       labels: times,
      //       datasets: [
      //           {
      //               // label: "My First dataset",
      //               // fillColor: "rgba(220,220,220,0.2)",
      //               // strokeColor: "rgba(220,220,220,1)",
      //               // pointColor: "rgba(220,220,220,1)",
      //               // pointStrokeColor: "#fff",
      //               // pointHighlightFill: "#fff",
      //               // pointHighlightStroke: "rgba(220,220,220,1)",
      //               data: temps
      //           },
      //           // {
      //               // label: "My Second dataset",
      //               // fillColor: "rgba(151,187,205,0.2)",
      //               // strokeColor: "rgba(151,187,205,1)",
      //               // pointColor: "rgba(151,187,205,1)",
      //               // pointStrokeColor: "#fff",
      //               // pointHighlightFill: "#fff",
      //               // pointHighlightStroke: "rgba(151,187,205,1)",
      //               // data: [28, 48, 40, 19, 86, 27, 90]
      //           // }
      //       ]
      //   };

      //   Chart.defaults.global.responsive = true;

      //   var ctx = document.getElementById("myChart").getContext("2d");
      //   var myNewChart = new Chart(ctx).Line(data, {
      //     // responsive: true,
      //     pointDotRadius: 5,
      //   });
      // });



    </script>
</body>
</html>
